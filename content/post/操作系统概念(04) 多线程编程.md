---
title: "操作系统概念(04) 多线程编程"
date: 2021-06-23T10:19:06+08:00
draft: false
---

# 多线程编程



## 1. 概述

线程是CPU使用的基本单元。它包括线程ID、程序计数器、寄存器组和堆栈。

一个繁忙的web服务器，可能有多个（可能上千个）客户端并发访问它。怎么解决？

- 多进程。服务器收到请求后，创建另一个进程以便处理请求。缺点：耗费时间和资源。
- 多线程。创建新线程以处理请求。

在远程过程调用中，RPC服务器通常也是多线程的。当服务器收到消息，它使用一个单独线程处理消息。这允许服务器处理多个并发请求。

优点：

- 响应性：增加响应效率。
- 资源共享：进程只能通过共享内存，消息传递来共享资源。这些需要程序员显示的安排。不过，线程默认共享它所属的进程的资源和内存。
- 经济：创建进程开销昂贵。对于Solaris，创建进程要比线程慢30倍，切换进程要比线程慢5倍。
- 可伸缩性：对于多处理器体系结构，多线程可以在多核并行运行。



## 2. 多核编程

